<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Identity Verification</title>
    <style>
        :root {
            --bg:#f5f7fb; --card:#fff; --text:#1f2937; --muted:#6b7280;
            --primary:#3b82f6; --primary-700:#2563eb; --ok:#16a34a; --bad:#dc2626; --ring:#93c5fd;
        }
        *{box-sizing:border-box}
        body{margin:0;background:var(--bg);font:16px/1.5 system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;}
        .wrap{min-height:100svh;display:grid;place-items:center;padding:24px}
        .card{width:min(520px, 92vw);background:var(--card);color:var(--text);
            border-radius:18px; padding:28px 28px 24px; box-shadow:0 10px 30px rgba(0,0,0,.08)}
        h1{margin:0 0 8px;font-size:28px}
        .sub{color:var(--muted);font-size:14px;margin-bottom:20px}
        .hint{font-size:13px;color:var(--muted);background:#eef2ff;border:1px dashed #c7d2fe;
            padding:8px 10px;border-radius:10px;margin-bottom:18px}
        .row{margin-bottom:16px}
        label{display:block;margin:0 0 6px;font-weight:600}
        input{width:100%;padding:12px 14px;border:1px solid #e5e7eb;border-radius:12px;
            outline:none;transition:.15s}
        input:focus{border-color:var(--ring); box-shadow:0 0 0 4px #93c5fd33}
        .actions{margin-top:6px}
        .btn{width:100%;border:0;border-radius:12px;padding:12px 16px;color:#fff;
            background:var(--primary);font-weight:700;cursor:pointer;transition:.15s}
        .btn:hover{background:var(--primary-700)}
        .msg{margin-top:14px;font-weight:700;display:none}
        .msg.ok{color:var(--ok)}
        .msg.bad{color:var(--bad)}
        .foot{margin-top:10px;font-size:12px;color:var(--muted);text-align:center}
        .badge{display:inline-block;padding:2px 8px;border-radius:999px;background:#f1f5f9;color:#475569;font-size:12px}
        .pair{display:flex;gap:10px;align-items:center}
        .pair code{background:#f8fafc;border:1px solid #e5e7eb;border-radius:8px;padding:4px 6px}

        .overlay{
            position:fixed; inset:0; display:none; z-index:1000;
            background:rgba(0,0,0,.45); place-items:center; padding:16px;
        }
        .overlay.show{display:grid}
        .dialog{
            position:relative; width:min(92vw,420px); background:#fff; color:var(--text);
            border-radius:16px; padding:20px 20px 16px; box-shadow:0 20px 60px rgba(0,0,0,.18);
        }
        .close-x{
            position:absolute; top:8px; right:10px; border:0; background:transparent;
            font-size:22px; line-height:1; cursor:pointer; color:#9ca3af;
        }
        .close-x:hover{color:#4b5563}
    </style>
</head>
<body>
<div class="wrap">
    <div class="card" role="region" aria-labelledby="title">
        <h1 id="title">Verify Identity</h1>

        <form id="form" autocomplete="off">
            <div class="row">
                <label for="username">Username</label>
                <input id="username" name="username" placeholder="Enter your username" inputmode="latin" />
            </div>

            <div class="row">
                <label for="name">Name</label>
                <input id="name" name="name" placeholder="Enter your full name" />
            </div>

            <div class="actions">
                <button type="submit" class="btn">Verify Identity</button>
            </div>
        </form>

    </div>
</div>

<!-- Success dialog -->
<div id="dlgSuccess" class="overlay" role="dialog" aria-modal="true" aria-labelledby="succTitle">
    <div class="dialog">
        <button class="close-x" aria-label="Close" onclick="hide('dlgSuccess')">×</button>
        <h2 id="succTitle" style="color:var(--ok)">Verification passed</h2>
        <p>Your identity has been verified successfully.</p>
        <button class="btn ok mt12" onclick="goHospital()">OK</button>
    </div>
</div>

<!-- Failed dialog -->
<div id="dlgFailed" class="overlay" role="dialog" aria-modal="true" aria-labelledby="failTitle">
    <div class="dialog">
        <button class="close-x" aria-label="Close" onclick="hide('dlgFailed')">×</button>
        <h2 id="failTitle" style="color:var(--bad)">Verification failed</h2>
        <p>Verification failed, please re-enter.</p>
    </div>
</div>

<script>

    function params(){ return new URLSearchParams(window.location.search); }
    function getFromStores(k){
        const v = params().get(k) || sessionStorage.getItem(k) || localStorage.getItem(k) || '';
        return v ? v.trim() : '';
    }

    const presetUsername = getFromStores('username');
    const presetName     = getFromStores('name');

    function show(id){ document.getElementById(id).classList.add('show'); }
    function hide(id){ document.getElementById(id).classList.remove('show'); }

    function goHospital(){
        const username = encodeURIComponent(document.getElementById('username').value.trim());
        const name     = encodeURIComponent(document.getElementById('name').value.trim());
        window.location.href = `hospitalChoice.html?username=${username}&name=${name}`;
    }

    // -------- verify flow --------
    document.getElementById('form').addEventListener('submit', function(e){
        e.preventDefault();
        const inputUsername = document.getElementById('username').value.trim();
        const inputName     = document.getElementById('name').value.trim();

        const expectedUsername = presetUsername;
        const expectedName     = presetName;

        if (inputUsername && inputName && inputUsername === expectedUsername && inputName === expectedName){
            show('dlgSuccess');
        } else {
            show('dlgFailed');
        }
    });

</script>
</body>
</html>
